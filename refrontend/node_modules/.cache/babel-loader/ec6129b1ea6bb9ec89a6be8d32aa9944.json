{"remainingRequest":"/usr/src/node_modules/thread-loader/dist/cjs.js!/usr/src/node_modules/babel-loader/lib/index.js!/usr/src/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/src/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/src/views/Listings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/src/views/Listings.vue","mtime":1571142500619},{"path":"/usr/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/src/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Object$keys from \"/usr/src/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _JSON$stringify from \"/usr/src/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport listing from \"../components/Listing.vue\";\nimport dataset from \"@/assets/dataset.json\";\nimport bad_dataset from \"@/assets/datasetbad.json\";\nexport default {\n  name: 'listings',\n  data: function data() {\n    return {\n      last: false,\n      prop_listings: [],\n      order: {},\n      biased: null,\n      pool: dataset,\n      timestamps: [],\n      actions: 0,\n      total: 0\n    };\n  },\n  mounted: function mounted() {\n    this.biased = Math.random() > 0.5 ? true : false;\n    this.prop_listings = this.shuffle(this.pool).slice(0, 4);\n\n    for (var i = 0; i < this.pool.length; i++) {\n      var key = this.pool[i].Name;\n      this.order[key] = [];\n    }\n\n    console.log(_JSON$stringify(this.order, null, 4));\n    this.total = this.pool.length;\n  },\n  methods: {\n    shuffle: function shuffle(array) {\n      for (var i = array.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * i);\n        var temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n      }\n\n      return array;\n    },\n    choose: function choose(prop_listing) {\n      var _this = this;\n\n      var temp = [];\n      var currentdate = new Date();\n      var dtString = \"\" + currentdate.getDate() + \"/\" + (currentdate.getMonth() + 1) + \"/\" + currentdate.getFullYear() + \" \" + currentdate.getHours() + \":\" + currentdate.getMinutes() + \":\" + currentdate.getSeconds();\n      this.timestamps.push(dtString);\n\n      _Object$keys(this.order).forEach(function (key) {\n        var value = _this.order[key];\n\n        for (var j = 0; j < _this.prop_listings.length; j++) {\n          // If was chosen or contains the element that was chosen, we want to add all non-chosen elements\n          // to that ordering.\n          if (value.includes(prop_listing.Name) || key == prop_listing.Name) {\n            // Filter the element that was chosen. Filter duplicates.\n            if (_this.prop_listings[j] !== prop_listing && !value.includes(_this.prop_listings[j].Name)) {\n              value.push(_this.prop_listings[j].Name);\n            }\n          }\n        }\n\n        _this.order[key] = value;\n      });\n\n      console.log(this.order);\n\n      if (this.last) {\n        var resultSet = {\n          \"order\": this.order,\n          \"timestamps\": this.timestamps,\n          \"biased\": this.biased\n        };\n        var ctx = this;\n        this.axios.post('/api', resultSet).then(function () {\n          ctx.$router.push(\"evaluation\");\n        }).catch(function (e) {\n          alert('Something went wrong');\n          console.log(e);\n        });\n      } else {\n        this.prop_listings = this.createListingFromOld();\n      }\n\n      this.actions += 1;\n    },\n    createListingFromOld: function createListingFromOld() {\n      var _this2 = this;\n\n      var empty = [];\n\n      _Object$keys(this.order).forEach(function (key) {\n        var value = _this2.order[key];\n\n        if (value.length == 0) {\n          empty.push(key);\n        }\n      });\n\n      if (empty.length <= 1) {\n        var sorted = this.sortOrder();\n        this.last = true;\n        return this.createListingsFromPool(sorted.slice(0, 4));\n      } else if (empty.length < 4) {\n        return this.createListingsFromPool(this.shuffle(empty));\n      } else {\n        return this.createListingsFromPool(this.shuffle(empty).slice(0, 4));\n      }\n    },\n    sortOrder: function sortOrder() {\n      var _this3 = this;\n\n      var array = [];\n      var result = [];\n\n      _Object$keys(this.order).forEach(function (key) {\n        var value = _this3.order[key];\n        array.push([key, value.length]);\n      });\n\n      array.sort(function (a, b) {\n        return b[1] - a[1];\n      });\n\n      for (var i = 0; i < array.length; i++) {\n        result.push(array[i][0]);\n      }\n\n      return result;\n    },\n    createListingsFromPool: function createListingsFromPool(array) {\n      var listings = [];\n\n      for (var j = 0; j < this.pool.length; j++) {\n        if (array.includes(this.pool[j].Name)) {\n          listings.push(this.pool[j]);\n        }\n      }\n\n      return listings;\n    }\n  },\n  props: {},\n  components: {\n    'listing': listing\n  }\n};",{"version":3,"sources":["Listings.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div> \n            <b-alert class=\"alert\" show>  \n                <b-row class=\"text-c\">\n                    <h3 class=\"text-c help-text\">Please choose the listing you find the most trustworthy. ({{actions}} / {{total}})</h3>\n                </b-row>\n                <b-row class=\"\"  v-if=\"biased\">\n                    <b-spinner class=\"spinner-center\" style=\"width: 3rem; height: 3rem;\" label=\"Large Spinner\"></b-spinner>\n                </b-row>\n            </b-alert>\n        </div>\n        <b-row>\n            <b-col class=\"no-padding\">  \n                <b-row class=\"no-r-margin\" if=\"pool\">\n                    <listing class=\"listing col-md-6\" v-for=\"prop_listing in prop_listings\" :prop_listing=\"prop_listing\" :key=\"prop_listing.Name\">\n                    </listing>\n                </b-row>\n            </b-col>\n            <b-col v-if=\"biased\" md=\"2\">\n                <b-row>\n                    <div class=\"addtext\">Advertisement</div>\n                    <b-img fluid :src=\"require('../assets/lock-eye.png')\"></b-img>\n                    <div class=\"add\"></div>\n                </b-row>\n\n            </b-col>\n        </b-row>\n    </div>\n</template>\n\n<script>\nimport listing from \"../components/Listing.vue\"\nimport dataset from \"@/assets/dataset.json\"\nimport bad_dataset from \"@/assets/datasetbad.json\"\n    export default {\n        name: 'listings',\n        data() {\n            return {\n                last : false,\n                prop_listings : [],\n                order : {},\n                biased: null,\n                pool : dataset,\n                timestamps : [],\n                actions: 0,\n                total: 0\n            }\n        },\n        mounted() {\n            this.biased = ((Math.random() > 0.5) ? true : false)\n            this.prop_listings = this.shuffle(this.pool).slice(0,4);\n            for (let i = 0; i < this.pool.length; i++) {\n                let key = this.pool[i].Name\n                this.order[key] = []\n            }\n            console.log(JSON.stringify(this.order, null, 4))\n            this.total = this.pool.length;\n\n        },\n        methods: {\n            shuffle(array) {\n                for(let i = array.length - 1; i > 0; i--) {\n                    const j = Math.floor(Math.random() * i)\n                    const temp = array[i]\n                    array[i] = array[j]\n                    array[j] = temp\n                }\n                return array\n            },\n            choose(prop_listing) {\n                const temp = [];\n                var currentdate = new Date(); \n                var dtString = \"\" + currentdate.getDate() + \"/\"\n                                + (currentdate.getMonth()+1)  + \"/\" \n                                + currentdate.getFullYear() + \" \"  \n                                + currentdate.getHours() + \":\"  \n                                + currentdate.getMinutes() + \":\" \n                                + currentdate.getSeconds();\n                this.timestamps.push(dtString);\n                Object.keys(this.order).forEach(key => {\n                    let value = this.order[key];\n                    for (let j = 0; j < this.prop_listings.length; j++) {\n                        // If was chosen or contains the element that was chosen, we want to add all non-chosen elements\n                        // to that ordering.\n                        if (value.includes(prop_listing.Name) || key == prop_listing.Name) {\n                            // Filter the element that was chosen. Filter duplicates.\n                            if(this.prop_listings[j] !== prop_listing && !value.includes(this.prop_listings[j].Name)) {\n                                value.push(this.prop_listings[j].Name);\n                            }\n                        }\n                    }\n                    this.order[key] = value;\n                })\n\n                console.log(this.order)\n                \n                if(this.last) {\n                    const resultSet = {\n                        \"order\" : this.order,\n                        \"timestamps\" : this.timestamps,\n                        \"biased\" : this.biased\n                    }\n                    var ctx = this;\n                    this.axios.post('/api', resultSet)\n                    .then(function(){\n                        ctx.$router.push(\"evaluation\");\n                    })\n                    .catch(function(e){\n                        alert('Something went wrong');\n                        console.log(e);\n                    })\n                } else {\n                    this.prop_listings = this.createListingFromOld();\n                }\n                \n                this.actions += 1\n            },\n            createListingFromOld() {\n                const empty = []\n                Object.keys(this.order).forEach(key => {\n                    let value = this.order[key];\n                    if (value.length == 0) {\n                        empty.push(key)\n                    }\n                })\n                if (empty.length <= 1) {\n                    const sorted = this.sortOrder()\n                    this.last = true\n                    return this.createListingsFromPool(sorted.slice(0, 4));\n                } else if (empty.length < 4) {\n                    return this.createListingsFromPool(this.shuffle(empty));\n                } else {\n                    return this.createListingsFromPool(this.shuffle(empty).slice(0,4));\n                }\n            },\n            sortOrder () {\n                let array = []\n                let result = []\n                Object.keys(this.order).forEach(key => {\n                    let value = this.order[key];\n                    array.push([key, value.length])\n                })\n                array.sort(function(a, b) {\n                    return b[1] - a[1];\n                });\n                \n                for(let i = 0; i < array.length; i++) {\n                    result.push(array[i][0]);\n                }\n                return result\n            },\n            createListingsFromPool(array) {\n                const listings = []\n                for (let j = 0; j < this.pool.length; j++) {\n                    if (array.includes(this.pool[j].Name)) {\n                        listings.push(this.pool[j]);\n                    }\n                }\n                return listings\n            }\n        },\n        props: {\n        },\n        components: {\n            'listing': listing\n        }\n    }\n</script>\n\n<style scoped lang=\"scss\">\n    .listing {\n        // height: 45%;\n        // max-height: 45vh;\n        height: 50vh;\n        // overflow: visible;\n    }\n\n    .help-text {\n        text-align: center;\n    }\n\n    .no-r-margin {\n        margin-right: 0;\n    }\n\n    .alert {\n        margin-bottom: 0px !important;\n        text-align: center;\n    }\n\n    .add {\n        background-image: url('../assets/lock-ad.png');\n        background-position: center;\n        background-size: cover;\n        width: 100%;\n        height: 500px;\n    }\n    \n    .addtext {\n        color: #665;\n        text-align: right;\n        display: inline-block;\n        padding-right: 20px;\n    }\n\n    .no-padding {\n        padding-right: 0px;\n    }\n\n    .text-c {\n        text-align: center;\n        width: 100%;\n    }\n\n    .spinner-center {\n        margin: auto;\n    }\n</style>\n"],"sourceRoot":"src/views"}]}